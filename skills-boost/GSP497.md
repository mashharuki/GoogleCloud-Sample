# GKE 用の Cloud オペレーション

## ハンズオンの記録

初期化

```bash
gcloud config set compute/region us-west1
gcloud config set compute/zone us-west1-b
```

デモ用のアプリのリポジトリをクローンしてくる

```bash
gsutil cp gs://spls/gsp497/gke-monitoring-tutorial.zip .
unzip gke-monitoring-tutorial.zip
cd gke-monitoring-tutorial
```

クラスタをデプロイする

```bash
make create
```

make createコマンドの解説
https://deepwiki.com/search/make-create_5fcc8934-3455-43cd-a63f-e02a996d0812

以下のようになればOK!

```bash
Apply complete! Resources: 5 added, 0 changed, 0 destroyed.

Outputs:

cluster_name = "stackdriver-monitoring-tutorial"
primary_location = "us-west1-b"
```

リソースが問題なく動作しているかを確認する

```bash
make validate
```

```bash
Fetching cluster endpoint and auth data.
kubeconfig entry generated for stackdriver-monitoring-tutorial.
App is deployed.
```

しばらくすると `Prometheus mem alloc` というアラートが上がるはず！

以下のコマンドでリソース削除

```bash
make teardown
```

## 参考文献
- [GitHub - GoogleCloudPlatform/gke-monitoring-tutorial](https://github.com/GoogleCloudPlatform/gke-monitoring-tutorial)
- [Deepwiki - gke-monitoring-tutorial](https://deepwiki.com/GoogleCloudPlatform/gke-monitoring-tutorial)
- [kubernetes-engine/docs/how-to/view-observability-metrics](https://cloud.google.com/kubernetes-engine/docs/how-to/view-observability-metrics)
