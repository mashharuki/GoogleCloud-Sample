var we=t=>{throw TypeError(t)};var Ae=(t,e,s)=>e.has(t)||we("Cannot "+s);var f=(t,e,s)=>(Ae(t,e,"read from private field"),s?s.call(t):e.get(t)),m=(t,e,s)=>e.has(t)?we("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),l=(t,e,s,r)=>(Ae(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),oe=(t,e,s)=>(Ae(t,e,"access private method"),s);import{g as O,a as c,b as v,h as P,w as We,S as Ze,u as a,s as Je,c as de,i as be,d as Be,k as Ge,e as Ve,f as I,j as ie,l as qe,z as ue,t as L,m as fe}from"./index-DQpPR7Eh.js";import{M as Gt,T as Bt,Z as Ht,x as vt,p as It,r as St,q as Et,A as wt,o as kt,n as Ct,y as _t,E as zt,B as Nt,C as Ut,D as Tt,F as Vt,v as Dt}from"./index-DQpPR7Eh.js";function Qe(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function ke(t,e,s){let r=0;for(let n=0;n<s;n++)r=r*256+t[e+n];return r}function Ce(t,e,s,r){const n=[];for(;s<e+1+r;){const i=De(t,s);n.push(i.result),s+=i.consumed,v(s<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:n}}function De(t,e){v(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const s=r=>{v(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;s(e+1+r);const n=ke(t,e+1,r);return s(e+1+r+n),Ce(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return s(e+1+r),Ce(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;s(e+1+r);const n=ke(t,e+1,r);s(e+1+r+n);const i=P(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;s(e+1+r);const n=P(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:Qe(t[e])}}function ge(t){const e=O(t,"data"),s=De(e,0);return c(s.consumed===e.length,"unexpected junk after rlp payload","data",t),s.result}function _e(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Oe(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(Oe(i))}),r.length<=55)return r.unshift(192+r.length),r;const n=_e(r.length);return n.unshift(247+n.length),n.concat(r)}const e=Array.prototype.slice.call(O(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const s=_e(e.length);return s.unshift(183+s.length),s.concat(e)}const ze="0123456789abcdef";function te(t){let e="0x";for(const s of Oe(t))e+=ze[s>>4],e+=ze[s&15];return e}const[Xe,Ye]=a.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),U=new Uint32Array(80),T=new Uint32Array(80);class et extends Ze{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:s,Bh:r,Bl:n,Ch:i,Cl:o,Dh:b,Dl:g,Eh:A,El:E,Fh:p,Fl:x,Gh:F,Gl:G,Hh:B,Hl:H}=this;return[e,s,r,n,i,o,b,g,A,E,p,x,F,G,B,H]}set(e,s,r,n,i,o,b,g,A,E,p,x,F,G,B,H){this.Ah=e|0,this.Al=s|0,this.Bh=r|0,this.Bl=n|0,this.Ch=i|0,this.Cl=o|0,this.Dh=b|0,this.Dl=g|0,this.Eh=A|0,this.El=E|0,this.Fh=p|0,this.Fl=x|0,this.Gh=F|0,this.Gl=G|0,this.Hh=B|0,this.Hl=H|0}process(e,s){for(let u=0;u<16;u++,s+=4)U[u]=e.getUint32(s),T[u]=e.getUint32(s+=4);for(let u=16;u<80;u++){const z=U[u-15]|0,N=T[u-15]|0,ye=a.rotrSH(z,N,1)^a.rotrSH(z,N,8)^a.shrSH(z,N,7),pe=a.rotrSL(z,N,1)^a.rotrSL(z,N,8)^a.shrSL(z,N,7),w=U[u-2]|0,k=T[u-2]|0,le=a.rotrSH(w,k,19)^a.rotrBH(w,k,61)^a.shrSH(w,k,6),xe=a.rotrSL(w,k,19)^a.rotrBL(w,k,61)^a.shrSL(w,k,6),ce=a.add4L(pe,xe,T[u-7],T[u-16]),Pe=a.add4H(ce,ye,le,U[u-7],U[u-16]);U[u]=Pe|0,T[u]=ce|0}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:b,Cl:g,Dh:A,Dl:E,Eh:p,El:x,Fh:F,Fl:G,Gh:B,Gl:H,Hh:re,Hl:ne}=this;for(let u=0;u<80;u++){const z=a.rotrSH(p,x,14)^a.rotrSH(p,x,18)^a.rotrBH(p,x,41),N=a.rotrSL(p,x,14)^a.rotrSL(p,x,18)^a.rotrBL(p,x,41),ye=p&F^~p&B,pe=x&G^~x&H,w=a.add5L(ne,N,pe,Ye[u],T[u]),k=a.add5H(w,re,z,ye,Xe[u],U[u]),le=w|0,xe=a.rotrSH(r,n,28)^a.rotrBH(r,n,34)^a.rotrBH(r,n,39),ce=a.rotrSL(r,n,28)^a.rotrBL(r,n,34)^a.rotrBL(r,n,39),Pe=r&i^r&b^i&b,Me=n&o^n&g^o&g;re=B|0,ne=H|0,B=F|0,H=G|0,F=p|0,G=x|0,{h:p,l:x}=a.add(A|0,E|0,k|0,le|0),A=b|0,E=g|0,b=i|0,g=o|0,i=r|0,o=n|0;const Ee=a.add3L(le,ce,Me);r=a.add3H(Ee,k,xe,Pe),n=Ee|0}({h:r,l:n}=a.add(this.Ah|0,this.Al|0,r|0,n|0)),{h:i,l:o}=a.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:b,l:g}=a.add(this.Ch|0,this.Cl|0,b|0,g|0),{h:A,l:E}=a.add(this.Dh|0,this.Dl|0,A|0,E|0),{h:p,l:x}=a.add(this.Eh|0,this.El|0,p|0,x|0),{h:F,l:G}=a.add(this.Fh|0,this.Fl|0,F|0,G|0),{h:B,l:H}=a.add(this.Gh|0,this.Gl|0,B|0,H|0),{h:re,l:ne}=a.add(this.Hh|0,this.Hl|0,re|0,ne|0),this.set(r,n,i,o,b,g,A,E,p,x,F,G,B,H,re,ne)}roundClean(){U.fill(0),T.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const tt=We(()=>new et);function st(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const Ne=st();Ne.crypto||Ne.msCrypto;function rt(t){switch(t){case"sha256":return Je.create();case"sha512":return tt.create()}c(!1,"invalid hashing algorithm name","algorithm",t)}const Re=function(t){return rt("sha256").update(t).digest()};let Ke=Re,$e=!1;function se(t){const e=O(t,"data");return P(Ke(e))}se._=Re;se.lock=function(){$e=!0};se.register=function(t){if($e)throw new Error("sha256 is locked");Ke=t};Object.freeze(se);Object.freeze(se);const je="0x0000000000000000000000000000000000000000";function Le(t,e){return{address:de(t),storageKeys:e.map((s,r)=>(c(be(s,32),"invalid slot",`storageKeys[${r}]`,s),s.toLowerCase()))}}function He(t){if(Array.isArray(t))return t.map((s,r)=>Array.isArray(s)?(c(s.length===2,"invalid slot set",`value[${r}]`,s),Le(s[0],s[1])):(c(s!=null&&typeof s=="object","invalid address-slot set","value",t),Le(s.address,s.storageKeys)));c(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(s=>{const r=t[s].reduce((n,i)=>(n[i]=!0,n),{});return Le(s,Object.keys(r).sort())});return e.sort((s,r)=>s.address.localeCompare(r.address)),e}function nt(t){let e;return typeof t=="string"?e=Be.computePublicKey(t,!1):e=t.publicKey,de(Ge("0x"+e.substring(4)).substring(26))}function it(t,e){return nt(Be.recoverPublicKey(t,e))}const y=BigInt(0),at=BigInt(2),lt=BigInt(27),ct=BigInt(28),ot=BigInt(35),ht=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Fe=4096*32;function Ue(t,e){let s=t.toString(16);for(;s.length<2;)s="0"+s;return s+=se(e).substring(4),"0x"+s}function me(t){return t==="0x"?null:de(t)}function ve(t,e){try{return He(t)}catch(s){c(!1,s.message,e,t)}}function ae(t,e){return t==="0x"?0:Ve(t,e)}function d(t,e){if(t==="0x")return y;const s=I(t,e);return c(s<=ht,"value exceeds uint size",e,s),s}function h(t,e){const s=I(t,"value"),r=L(s);return c(r.length<=32,"value too large",`tx.${e}`,s),r}function Ie(t){return He(t).map(e=>[e.address,e.storageKeys])}function ut(t,e){c(Array.isArray(t),`invalid ${e}`,"value",t);for(let s=0;s<t.length;s++)c(be(t[s],32),"invalid ${ param } hash",`value[${s}]`,t[s]);return t}function ft(t){const e=ge(t);c(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const s={type:0,nonce:ae(e[0],"nonce"),gasPrice:d(e[1],"gasPrice"),gasLimit:d(e[2],"gasLimit"),to:me(e[3]),value:d(e[4],"value"),data:P(e[5]),chainId:y};if(e.length===6)return s;const r=d(e[6],"v"),n=d(e[7],"r"),i=d(e[8],"s");if(n===y&&i===y)s.chainId=r;else{let o=(r-ot)/at;o<y&&(o=y),s.chainId=o,c(o!==y||r===lt||r===ct,"non-canonical legacy v","v",e[6]),s.signature=ie.from({r:ue(e[7],32),s:ue(e[8],32),v:r})}return s}function dt(t,e){const s=[h(t.nonce,"nonce"),h(t.gasPrice||0,"gasPrice"),h(t.gasLimit,"gasLimit"),t.to||"0x",h(t.value,"value"),t.data];let r=y;if(t.chainId!=y)r=I(t.chainId,"tx.chainId"),c(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==y&&(s.push(L(r)),s.push("0x"),s.push("0x")),te(s);let n=BigInt(27+e.yParity);return r!==y?n=ie.getChainIdV(r,e.v):BigInt(e.v)!==n&&c(!1,"tx.chainId/sig.v mismatch","sig",e),s.push(L(n)),s.push(L(e.r)),s.push(L(e.s)),te(s)}function Se(t,e){let s;try{if(s=ae(e[0],"yParity"),s!==0&&s!==1)throw new Error("bad yParity")}catch{c(!1,"invalid yParity","yParity",e[0])}const r=ue(e[1],32),n=ue(e[2],32),i=ie.from({r,s:n,yParity:s});t.signature=i}function bt(t){const e=ge(O(t).slice(1));c(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",P(t));const s={type:2,chainId:d(e[0],"chainId"),nonce:ae(e[1],"nonce"),maxPriorityFeePerGas:d(e[2],"maxPriorityFeePerGas"),maxFeePerGas:d(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:d(e[4],"gasLimit"),to:me(e[5]),value:d(e[6],"value"),data:P(e[7]),accessList:ve(e[8],"accessList")};return e.length===9||Se(s,e.slice(9)),s}function gt(t,e){const s=[h(t.chainId,"chainId"),h(t.nonce,"nonce"),h(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),h(t.maxFeePerGas||0,"maxFeePerGas"),h(t.gasLimit,"gasLimit"),t.to||"0x",h(t.value,"value"),t.data,Ie(t.accessList||[])];return e&&(s.push(h(e.yParity,"yParity")),s.push(L(e.r)),s.push(L(e.s))),fe(["0x02",te(s)])}function mt(t){const e=ge(O(t).slice(1));c(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",P(t));const s={type:1,chainId:d(e[0],"chainId"),nonce:ae(e[1],"nonce"),gasPrice:d(e[2],"gasPrice"),gasLimit:d(e[3],"gasLimit"),to:me(e[4]),value:d(e[5],"value"),data:P(e[6]),accessList:ve(e[7],"accessList")};return e.length===8||Se(s,e.slice(8)),s}function yt(t,e){const s=[h(t.chainId,"chainId"),h(t.nonce,"nonce"),h(t.gasPrice||0,"gasPrice"),h(t.gasLimit,"gasLimit"),t.to||"0x",h(t.value,"value"),t.data,Ie(t.accessList||[])];return e&&(s.push(h(e.yParity,"recoveryParam")),s.push(L(e.r)),s.push(L(e.s))),fe(["0x01",te(s)])}function pt(t){let e=ge(O(t).slice(1)),s="3",r=null;if(e.length===4&&Array.isArray(e[0])){s="3 (network format)";const i=e[1],o=e[2],b=e[3];c(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),c(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),c(Array.isArray(b),"invalid network format: proofs not an array","fields[3]",b),c(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),c(i.length===b.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let g=0;g<e[1].length;g++)r.push({data:i[g],commitment:o[g],proof:b[g]});e=e[0]}c(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${s}`,"data",P(t));const n={type:3,chainId:d(e[0],"chainId"),nonce:ae(e[1],"nonce"),maxPriorityFeePerGas:d(e[2],"maxPriorityFeePerGas"),maxFeePerGas:d(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:d(e[4],"gasLimit"),to:me(e[5]),value:d(e[6],"value"),data:P(e[7]),accessList:ve(e[8],"accessList"),maxFeePerBlobGas:d(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(n.blobs=r),c(n.to!=null,`invalid address for transaction type: ${s}`,"data",t),c(Array.isArray(n.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<n.blobVersionedHashes.length;i++)c(be(n.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||Se(n,e.slice(11)),n}function xt(t,e,s){const r=[h(t.chainId,"chainId"),h(t.nonce,"nonce"),h(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),h(t.maxFeePerGas||0,"maxFeePerGas"),h(t.gasLimit,"gasLimit"),t.to||je,h(t.value,"value"),t.data,Ie(t.accessList||[]),h(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),ut(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(h(e.yParity,"yParity")),r.push(L(e.r)),r.push(L(e.s)),s)?fe(["0x03",te([r,s.map(n=>n.data),s.map(n=>n.commitment),s.map(n=>n.proof)])]):fe(["0x03",te(r)])}var S,K,$,j,M,W,Z,J,q,Q,X,Y,R,V,_,D,ee,he;const C=class C{constructor(){m(this,ee);m(this,S);m(this,K);m(this,$);m(this,j);m(this,M);m(this,W);m(this,Z);m(this,J);m(this,q);m(this,Q);m(this,X);m(this,Y);m(this,R);m(this,V);m(this,_);m(this,D);l(this,S,null),l(this,K,null),l(this,j,0),l(this,M,y),l(this,W,null),l(this,Z,null),l(this,J,null),l(this,$,"0x"),l(this,q,y),l(this,Q,y),l(this,X,null),l(this,Y,null),l(this,R,null),l(this,V,null),l(this,D,null),l(this,_,null)}get type(){return f(this,S)}set type(e){switch(e){case null:l(this,S,null);break;case 0:case"legacy":l(this,S,0);break;case 1:case"berlin":case"eip-2930":l(this,S,1);break;case 2:case"london":case"eip-1559":l(this,S,2);break;case 3:case"cancun":case"eip-4844":l(this,S,3);break;default:c(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=f(this,K);return e==null&&this.type===3?je:e}set to(e){l(this,K,e==null?null:de(e))}get nonce(){return f(this,j)}set nonce(e){l(this,j,Ve(e,"value"))}get gasLimit(){return f(this,M)}set gasLimit(e){l(this,M,I(e))}get gasPrice(){const e=f(this,W);return e==null&&(this.type===0||this.type===1)?y:e}set gasPrice(e){l(this,W,e==null?null:I(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=f(this,Z);return e??(this.type===2||this.type===3?y:null)}set maxPriorityFeePerGas(e){l(this,Z,e==null?null:I(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=f(this,J);return e??(this.type===2||this.type===3?y:null)}set maxFeePerGas(e){l(this,J,e==null?null:I(e,"maxFeePerGas"))}get data(){return f(this,$)}set data(e){l(this,$,P(e))}get value(){return f(this,q)}set value(e){l(this,q,I(e,"value"))}get chainId(){return f(this,Q)}set chainId(e){l(this,Q,I(e))}get signature(){return f(this,X)||null}set signature(e){l(this,X,e==null?null:ie.from(e))}get accessList(){const e=f(this,Y)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){l(this,Y,e==null?null:He(e))}get maxFeePerBlobGas(){const e=f(this,R);return e==null&&this.type===3?y:e}set maxFeePerBlobGas(e){l(this,R,e==null?null:I(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=f(this,V);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){c(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let s=0;s<e.length;s++)c(be(e[s],32),"invalid blobVersionedHash",`value[${s}]`,e[s])}l(this,V,e)}get blobs(){return f(this,D)==null?null:f(this,D).map(e=>Object.assign({},e))}set blobs(e){if(e==null){l(this,D,null);return}const s=[],r=[];for(let n=0;n<e.length;n++){const i=e[n];if(qe(i)){v(f(this,_),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=O(i);if(c(o.length<=Fe,"blob is too large",`blobs[${n}]`,i),o.length!==Fe){const A=new Uint8Array(Fe);A.set(o),o=A}const b=f(this,_).blobToKzgCommitment(o),g=P(f(this,_).computeBlobKzgProof(o,b));s.push({data:P(o),commitment:P(b),proof:g}),r.push(Ue(1,b))}else{const o=P(i.commitment);s.push({data:P(i.data),commitment:o,proof:P(i.proof)}),r.push(Ue(1,o))}}l(this,D,s),l(this,V,r)}get kzg(){return f(this,_)}set kzg(e){l(this,_,e)}get hash(){return this.signature==null?null:Ge(oe(this,ee,he).call(this,!0,!1))}get unsignedHash(){return Ge(this.unsignedSerialized)}get from(){return this.signature==null?null:it(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Be.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return oe(this,ee,he).call(this,!0,!0)}get unsignedSerialized(){return oe(this,ee,he).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,s=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,n=f(this,R)!=null||f(this,V);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&v(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),v(!s||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),v(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):s?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(n&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return C.from(this)}toJSON(){const e=s=>s==null?null:s.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new C;if(typeof e=="string"){const r=O(e);if(r[0]>=127)return C.from(ft(r));switch(r[0]){case 1:return C.from(mt(r));case 2:return C.from(bt(r));case 3:return C.from(pt(r))}v(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const s=new C;return e.type!=null&&(s.type=e.type),e.to!=null&&(s.to=e.to),e.nonce!=null&&(s.nonce=e.nonce),e.gasLimit!=null&&(s.gasLimit=e.gasLimit),e.gasPrice!=null&&(s.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(s.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(s.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(s.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(s.data=e.data),e.value!=null&&(s.value=e.value),e.chainId!=null&&(s.chainId=e.chainId),e.signature!=null&&(s.signature=ie.from(e.signature)),e.accessList!=null&&(s.accessList=e.accessList),e.blobVersionedHashes!=null&&(s.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(s.kzg=e.kzg),e.blobs!=null&&(s.blobs=e.blobs),e.hash!=null&&(c(s.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),c(s.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(c(s.isSigned(),"unsigned transaction cannot define '.from'","tx",e),c(s.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),s}};S=new WeakMap,K=new WeakMap,$=new WeakMap,j=new WeakMap,M=new WeakMap,W=new WeakMap,Z=new WeakMap,J=new WeakMap,q=new WeakMap,Q=new WeakMap,X=new WeakMap,Y=new WeakMap,R=new WeakMap,V=new WeakMap,_=new WeakMap,D=new WeakMap,ee=new WeakSet,he=function(e,s){v(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return dt(this,r);case 1:return yt(this,r);case 2:return gt(this,r);case 3:return xt(this,r,s?this.blobs:null)}v(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Te=C;export{Gt as MessagePrefix,ie as Signature,Be as SigningKey,Te as Transaction,Bt as TypedDataEncoder,je as ZeroAddress,Ht as ZeroHash,He as accessListify,v as assert,c as assertArgument,vt as assertPrivate,nt as computeAddress,fe as concat,It as dataLength,ge as decodeRlp,St as defineProperties,te as encodeRlp,de as getAddress,I as getBigInt,O as getBytes,Et as getBytesCopy,Ve as getNumber,wt as getUint,kt as hashMessage,P as hexlify,Ct as id,qe as isBytesLike,be as isHexString,Ge as keccak256,_t as makeError,zt as mask,it as recoverAddress,se as sha256,L as toBeArray,Nt as toBeHex,Ut as toQuantity,Tt as toTwos,Vt as toUtf8Bytes,Dt as version,ue as zeroPadValue};
